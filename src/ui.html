<!DOCTYPE html>
<html>
<head>
<style type="text/css">
* {
    margin: 0px;
    padding: 0px;
}

#tabBar {
    height: 30px;
    background-image: url(./images/tab_base_fill.png);
    background-repeat: repeat-x;
}

.tab {
    min-width: 160px;
    border-width:10px 23px 4px 12px;
    border-image: url(./images/tab_inactive.png) 10 23 4 12 fill;
    line-height: 16px;
    font-size: 16px;
    float: left;
    margin-right: -18px;
    z-index: 0;
}

.active {
    border-image-source :url(./images/tab_active.png);
    position: relative;
    z-index: 1;
}

#urlBar {
    background-image: url(./images/urlbar_fill.png);
    background-repeat: repeat-x;
    padding-left: 60px; /* due to back/forward buttons */
    padding-right: 4px; /* due to tabBar > input border */
}

#buttonBack {
    height: 36px;
    width: 28px;
    background-image: url(./images/button_back.png);
    float: left;
}

#buttonForward {
    height: 36px;
    width: 28px;
    background-image: url(./images/button_forward.png);
    float: left;
}

form {
    width: 100%;
}

input {
    background-color: transparent;
    border-image: url(./images/urlbar_input.png) 8 4 8 4 fill;
    border-width: 8px 4px 8px 4px;
    width: 100%;
    margin-right: -50px;
}

</style>
<script type="text/javascript">

activeTab = null;
nextId = 0;

function addEmptyTab()
{
    var tabBar = document.getElementById("tabBar");
    var div = document.createElement("div");
    var tabId = nextId++;
    div.id = String(tabId);
    div.className = "tab";
    div.appendChild(document.createTextNode("New Tab"));
    div.onclick = function() { selectTab(div); }
    tabBar.appendChild(div);
    window._addTab(tabId);
    div._url = "http://";
    selectTab(div);
}

function selectTab(obj)
{
    if (activeTab == obj)
        return;

    if (activeTab)
        activeTab.className = "tab";

    obj.className = "tab active";
    activeTab = obj;
    window._setCurrentTab(parseInt(activeTab.id));
    var urlField = document.getElementById("urlField");
    urlField.value = activeTab._url;
    if (urlField.value == "http://")
        urlField.focus();
}

function loadUrl()
{
    var urlField = document.getElementById("urlField");
    var url = urlField.value;
    window._loadUrl(url);
    activeTab._url = url;
    urlField.blur();
}

function goBack()
{
    window._back();
}

function goForward()
{
    window._forward();
}

</script>
</head>
<body onload="addEmptyTab();">
    <div id="tabBar">
        <span onclick="addEmptyTab()">add tab</span>
    </div>
    <div id="buttonBack" onclick="goBack();"> </div>
    <div id="buttonForward" onclick="goForward();"> </div>
    <div id="urlBar"><form onsubmit="loadUrl(); return false;"><input id="urlField" type="text" /></form></div>
</body>
</html>
